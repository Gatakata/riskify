{% extends "base.html" %}

{% block title %}Riskify - AI Risk Management Hub{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Hero Section -->
    <div class="text-center mb-5">
        <div class="mb-4">
            <i class="fas fa-chart-line fa-4x mb-3" style="color: #f97316;"></i>
        </div>
        <h1 class="display-4 fw-bold mb-3" style="color: #1a365d;">Welcome to Riskify</h1>
        <p class="lead text-muted mb-4">
            AI-powered risk management platform for financial institutions.<br>
            Choose from our specialized machine learning models to assess and predict financial risks.
        </p>
        {% if current_user.is_authenticated %}
        <div class="user-welcome mt-4 p-4 bg-light rounded shadow-sm">
            <h5 class="mb-2">Welcome back, <strong>{{ current_user.full_name }}</strong></h5>
            <span class="badge bg-primary fs-6">{{ current_user.get_role_display() }}</span>
            <a href="{{ url_for('logout') }}" class="btn btn-outline-secondary btn-sm ms-3">
                <i class="fas fa-sign-out-alt"></i> Sign Out
            </a>
        </div>
        {% endif %}
    </div>

    <!-- Model Selection Cards -->
    <div class="row g-4 mb-5">
        <!-- Fraud Detection -->
        {% if current_user.can_access('fraud_detection') %}
        <div class="col-lg-4">
            <div class="card h-100 shadow-sm border-0 position-relative overflow-hidden">
                <div class="card-header text-white text-center py-4" style="background: linear-gradient(135deg, #dc2626, #b91c1c);">
                    <i class="fas fa-shield-alt fa-3x mb-3"></i>
                    <h4 class="fw-bold mb-0">Fraud Detection</h4>
                </div>
                <div class="card-body p-4">
                    <h6 class="text-muted mb-3">XGBoost Machine Learning</h6>
                    <ul class="list-unstyled mb-4">
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Real-time transaction analysis</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Risk scoring & classification</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Advanced pattern detection</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Automated flagging system</li>
                    </ul>
                    <div class="text-center">
                        <a href="{{ url_for('fraud_detection') }}" class="btn btn-danger btn-lg w-100">
                            <i class="fas fa-search me-2"></i>Analyze Transaction
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Stock Prediction -->
        {% if current_user.can_access('stock_prediction') %}
        <div class="col-lg-4">
            <div class="card h-100 shadow-sm border-0 position-relative overflow-hidden">
                <div class="card-header text-white text-center py-4" style="background: linear-gradient(135deg, #059669, #047857);">
                    <i class="fas fa-chart-line fa-3x mb-3"></i>
                    <h4 class="fw-bold mb-0">Stock Prediction</h4>
                </div>
                <div class="card-body p-4">
                    <h6 class="text-muted mb-3">Random Forest Algorithm</h6>
                    <ul class="list-unstyled mb-4">
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Price direction prediction</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Technical indicator analysis</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Market signal detection</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Risk assessment & returns</li>
                    </ul>
                    <div class="text-center">
                        <a href="{{ url_for('stock_prediction') }}" class="btn btn-success btn-lg w-100">
                            <i class="fas fa-chart-area me-2"></i>Predict Stock Movement
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Loan Assessment -->
        {% if current_user.can_access('loan_prediction') %}
        <div class="col-lg-4">
            <div class="card h-100 shadow-sm border-0 position-relative overflow-hidden">
                <div class="card-header text-dark text-center py-4" style="background: linear-gradient(135deg, #f97316, #ea580c);">
                    <i class="fas fa-university fa-3x mb-3"></i>
                    <h4 class="fw-bold mb-0">Loan Assessment</h4>
                </div>
                <div class="card-body p-4">
                    <h6 class="text-muted mb-3">XGBoost Risk Modeling</h6>
                    <ul class="list-unstyled mb-4">
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Default probability analysis</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Credit risk evaluation</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Interest rate suggestions</li>
                        <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Approval recommendations</li>
                    </ul>
                    <div class="text-center">
                        <a href="{{ url_for('loan_prediction') }}" class="btn text-dark btn-lg w-100" style="background-color: #f97316; border-color: #f97316;">
                            <i class="fas fa-calculator me-2"></i>Assess Loan Risk
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Features Overview -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0" style="background: linear-gradient(135deg, #1a365d, #2563eb); color: white;">
                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <h3 class="fw-bold mb-3">Why Choose Riskify?</h3>
                        <p class="lead mb-0">Advanced AI technology meets financial expertise</p>
                    </div>
                    
                    <div class="row g-4 mt-3">
                        <div class="col-md-3 text-center">
                            <i class="fas fa-brain fa-2x mb-3" style="color: #f97316;"></i>
                            <h5 class="fw-bold">AI-Powered</h5>
                            <p class="small mb-0">Advanced machine learning algorithms trained on real financial data</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <i class="fas fa-clock fa-2x mb-3" style="color: #f97316;"></i>
                            <h5 class="fw-bold">Real-Time</h5>
                            <p class="small mb-0">Instant risk analysis and decision support for immediate action</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <i class="fas fa-shield-alt fa-2x mb-3" style="color: #f97316;"></i>
                            <h5 class="fw-bold">Secure</h5>
                            <p class="small mb-0">Enterprise-grade security with encrypted data processing</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <i class="fas fa-chart-bar fa-2x mb-3" style="color: #f97316;"></i>
                            <h5 class="fw-bold">Accurate</h5>
                            <p class="small mb-0">Proven model performance with continuous learning capabilities</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Stats -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="text-center p-4" style="background-color: #f8fafc; border-radius: 12px;">
                <div class="row">
                    <div class="col-md-4">
                        <h4 class="fw-bold" style="color: #1a365d;">3</h4>
                        <p class="text-muted mb-0">Specialized Models</p>
                    </div>
                    <div class="col-md-4">
                        <h4 class="fw-bold" style="color: #1a365d;">Real-Time</h4>
                        <p class="text-muted mb-0">Risk Analysis</p>
                    </div>
                    <div class="col-md-4">
                        <h4 class="fw-bold" style="color: #1a365d;">99.9%</h4>
                        <p class="text-muted mb-0">Uptime Reliability</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Platform Overview -->
    <div class="row mt-5">
        <div class="col-12">
            <h2 class="text-center fw-bold mb-4" style="color: #1a365d;">Comprehensive Risk Management Platform</h2>
            <p class="lead text-center text-muted mb-5">
                Riskify leverages cutting-edge machine learning algorithms to provide financial institutions with 
                intelligent risk assessment tools. Our platform combines multiple specialized models to deliver 
                comprehensive insights across fraud detection, market analysis, and credit risk evaluation.
            </p>
        </div>
    </div>

    <!-- Model Details -->
    <div class="row mt-4 g-4">
        <div class="col-lg-4">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="rounded-circle mx-auto d-flex align-items-center justify-content-center" 
                             style="width: 80px; height: 80px; background: linear-gradient(135deg, #dc2626, #b91c1c);">
                            <i class="fas fa-shield-alt fa-2x text-white"></i>
                        </div>
                    </div>
                    <h5 class="fw-bold mb-3">XGBoost Fraud Detection</h5>
                    <p class="text-muted small">
                        Advanced gradient boosting algorithm trained on transaction patterns to identify 
                        fraudulent activities with high precision and recall rates.
                    </p>
                    <ul class="list-unstyled small text-start">
                        <li><i class="fas fa-check text-success me-2"></i>Real-time transaction scoring</li>
                        <li><i class="fas fa-check text-success me-2"></i>Pattern recognition algorithms</li>
                        <li><i class="fas fa-check text-success me-2"></i>Risk level classification</li>
                        <li><i class="fas fa-check text-success me-2"></i>Automated alert system</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="rounded-circle mx-auto d-flex align-items-center justify-content-center" 
                             style="width: 80px; height: 80px; background: linear-gradient(135deg, #059669, #047857);">
                            <i class="fas fa-chart-line fa-2x text-white"></i>
                        </div>
                    </div>
                    <h5 class="fw-bold mb-3">Random Forest Stock Prediction</h5>
                    <p class="text-muted small">
                        Ensemble learning method that analyzes technical indicators and market signals 
                        to predict stock price movements and identify trading opportunities.
                    </p>
                    <ul class="list-unstyled small text-start">
                        <li><i class="fas fa-check text-success me-2"></i>Technical indicator analysis</li>
                        <li><i class="fas fa-check text-success me-2"></i>Market signal detection</li>
                        <li><i class="fas fa-check text-success me-2"></i>Volatility assessment</li>
                        <li><i class="fas fa-check text-success me-2"></i>Expected return calculation</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body p-4 text-center">
                    <div class="mb-3">
                        <div class="rounded-circle mx-auto d-flex align-items-center justify-content-center" 
                             style="width: 80px; height: 80px; background: linear-gradient(135deg, #f97316, #ea580c);">
                            <i class="fas fa-university fa-2x text-white"></i>
                        </div>
                    </div>
                    <h5 class="fw-bold mb-3">XGBoost Loan Assessment</h5>
                    <p class="text-muted small">
                        Sophisticated credit risk modeling that evaluates borrower profiles to predict 
                        default probability and recommend appropriate interest rates.
                    </p>
                    <ul class="list-unstyled small text-start">
                        <li><i class="fas fa-check text-success me-2"></i>Credit score analysis</li>
                        <li><i class="fas fa-check text-success me-2"></i>Debt-to-income evaluation</li>
                        <li><i class="fas fa-check text-success me-2"></i>Employment history review</li>
                        <li><i class="fas fa-check text-success me-2"></i>Interest rate optimization</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Getting Started -->
    {% if current_user.is_authenticated %}
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0" style="background: linear-gradient(135deg, #f8fafc, #e2e8f0);">
                <div class="card-body p-5 text-center">
                    <h3 class="fw-bold mb-3" style="color: #1a365d;">Ready to Get Started?</h3>
                    <p class="lead text-muted mb-4">
                        You have access to {{ current_user.get_accessible_pages()|length }} specialized modules based on your role as 
                        <strong>{{ current_user.get_role_display() }}</strong>
                    </p>
                    <div class="d-flex justify-content-center gap-3 flex-wrap">
                        {% if current_user.can_access('fraud_detection') %}
                        <a href="{{ url_for('fraud_detection') }}" class="btn btn-danger btn-lg">
                            <i class="fas fa-shield-alt me-2"></i>Start Fraud Analysis
                        </a>
                        {% endif %}
                        {% if current_user.can_access('stock_prediction') %}
                        <a href="{{ url_for('stock_prediction') }}" class="btn btn-success btn-lg">
                            <i class="fas fa-chart-line me-2"></i>Predict Stock Movement
                        </a>
                        {% endif %}
                        {% if current_user.can_access('loan_prediction') %}
                        <a href="{{ url_for('loan_prediction') }}" class="btn btn-lg text-white" style="background-color: #f97316;">
                            <i class="fas fa-university me-2"></i>Assess Loan Risk
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Footer Information -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="text-center p-4 border-top">
                <h6 class="text-muted mb-2">Need Help?</h6>
                <p class="small text-muted mb-3">
                    Access your <a href="{{ url_for('profile') }}" class="text-decoration-none">profile settings</a> 
                    to update your information or contact support for assistance.
                </p>
                <div class="mb-3">
                    <a href="{{ url_for('download_presentation') }}" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-download me-2"></i>Download System Presentation
                    </a>
                </div>
                <p class="small text-muted">
                    <strong>Developed by:</strong> Takunda Mcdonald Gatakata<br>
                    <strong>Contact:</strong> 0775919353 / 0718111419<br>
                    <strong>Specialization:</strong> Data Science and Systems
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}